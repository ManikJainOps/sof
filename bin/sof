#!/usr/bin/env ruby
require 'thor'
require_relative '../lib/sof'
require_relative '../lib/sof/runner'
require_relative '../lib/sof/manifest'


class SofCommand < Thor
  method_option :manifest, required: true, type: :string, aliases: '-m', desc: 'specify manifest'
  desc 'check-server', 'Takes a list of servers (ADDRESS:TYPE) and a SSH port to check if they are on fire'
  def check_server
    manifest = Sof::Manifest.get(options[:manifest])
    sof = Sof::Runner.new(manifest)
    sof.run_checks
  end
end

SofCommand.start
